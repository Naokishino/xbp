<!DOCTYPE html>
<html lang="jp">
<head>
    <!-- ⑥↓タイトルを変えてみよう -->
    <title>ゲームを作ろう</title>
    <!-- ⑤スタイルシートの設定をしよう -->
    <!-- h1.htmlからある行をコピペしてくればOK -->
</head>
<body>
    <h1>モジュールからパックマンのゲームを探し、自分なりに画像を変更しアレンジした</h1>
    <div>
        <img src="images/pakku.png"    width=40%>
        <code>
            <ol style="list-style:decimal-leading-zero outside;in-left:0;padding-left:36px;margin:0;background-color:#EEF;color:#000;">
            <li style="background-color:#EFF;">import pygame</li>
            <li style="background-color:#EEF;">import sys</li>
            <li style="background-color:#EFF;">import random</li>
            <li style="background-color:#EEF;">import math</li>
            <li style="background-color:#EFF;">from collections import deque</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** 画像の読込 ********************</li>
            <li style="background-color:#EEF;">img_road = pygame.image.load("image/road.png")</li>
            <li style="background-color:#EFF;">img_wall = pygame.image.load("image/wall.png")</li>
            <li style="background-color:#EEF;">img_scope = [</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/scope_0.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/scope_1.png")</li>
            <li style="background-color:#EFF;">]</li>
            <li style="background-color:#EEF;">img_player = [</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/S__14762009.jpg"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/S__14762009.jpg"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/player_2.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/player_3.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/player_4.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/player_5.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/player_6.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/player_7.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/player_8.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/player_9.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/player_10.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/player_11.png")</li>
            <li style="background-color:#EFF;">]</li>
            <li style="background-color:#EEF;">img_enemy = [</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_0.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_1.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_2.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_3.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_4.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_5.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_6.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_7.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_8.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_9.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_10.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_11.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_12.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_13.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_14.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_15.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_16.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_17.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_18.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_19.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_20.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_21.png"),</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_22.png"),</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.image.load("image/enemy_23.png")</li>
            <li style="background-color:#EFF;">]</li>
            <li style="background-color:#EEF;">img_goal = pygame.image.load("image/goal.png")</li>
            <li style="background-color:#EFF;">img_coin = pygame.image.load("image/coin.png")</li>
            <li style="background-color:#EEF;">img_item = pygame.image.load("image/item.png")</li>
            <li style="background-color:#EFF;">img_arrow = pygame.image.load("image/arrow.png")</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** 定数／変数 ********************</li>
            <li style="background-color:#EEF;"># =============== COLOR ===============</li>
            <li style="background-color:#EFF;">WHITE = (255, 255, 255)</li>
            <li style="background-color:#EEF;">BLACK = (0, 0, 0)</li>
            <li style="background-color:#EFF;">RED = (255, 0, 0)</li>
            <li style="background-color:#EEF;"># =============== SOUND ===============</li>
            <li style="background-color:#EFF;">snd_pacman_blue = None</li>
            <li style="background-color:#EEF;">snd_pacman_red = None</li>
            <li style="background-color:#EFF;">snd_pacman_yellow = None</li>
            <li style="background-color:#EEF;">snd_pacman_green = None</li>
            <li style="background-color:#EFF;">snd_pacman_brown = None</li>
            <li style="background-color:#EEF;">snd_player_attack = None</li>
            <li style="background-color:#EFF;">snd_player_damage = None</li>
            <li style="background-color:#EEF;">snd_break_wall = None</li>
            <li style="background-color:#EFF;">snd_arrive_goal = None</li>
            <li style="background-color:#EEF;">snd_get_coin = None</li>
            <li style="background-color:#EFF;">snd_get_item = None</li>
            <li style="background-color:#EEF;"># =============== SIZE / FPS ===============</li>
            <li style="background-color:#EFF;">SCREEN_SIZE = 900  # スクリーンサイズ</li>
            <li style="background-color:#EEF;">FPS = 10  # フレームレート</li>
            <li style="background-color:#EFF;"># =============== DIRECTION ===============</li>
            <li style="background-color:#EEF;">DIR_UP = 0  # 上方向</li>
            <li style="background-color:#EFF;">DIR_RIGHT = 1  # 右方向</li>
            <li style="background-color:#EEF;">DIR_DOWN = 2  # 下方向</li>
            <li style="background-color:#EFF;">DIR_LEFT = 3  # 左方向</li>
            <li style="background-color:#EEF;"># =============== COLOR ===============</li>
            <li style="background-color:#EFF;">COLOR_BLACK = 0  # 黒色</li>
            <li style="background-color:#EEF;">COLOR_BLUE = 1  # 青色</li>
            <li style="background-color:#EFF;">COLOR_RED = 2  # 赤色</li>
            <li style="background-color:#EEF;">COLOR_YELLOW = 3  # 黄色</li>
            <li style="background-color:#EFF;">COLOR_GREEN = 4  # 緑色</li>
            <li style="background-color:#EEF;">COLOR_BROWN = 5  # 茶色</li>
            <li style="background-color:#EFF;"># =============== GAME MANAGE ===============</li>
            <li style="background-color:#EEF;">idx = 0  # ゲーム進行のインデックス</li>
            <li style="background-color:#EFF;">tmr = 0  # ゲームのタイマー</li>
            <li style="background-color:#EEF;">course = 0  # コースの回数</li>
            <li style="background-color:#EFF;">WALL = 0  # 壁</li>
            <li style="background-color:#EEF;">ROAD = -1  # 通路</li>
            <li style="background-color:#EFF;">GOAL = -2  # ゴール</li>
            <li style="background-color:#EEF;">ITEM = -3  # アイテム</li>
            <li style="background-color:#EFF;">COIN = -4  # コイン</li>
            <li style="background-color:#EEF;"># =============== PLAYER ===============</li>
            <li style="background-color:#EFF;">pl_col = 0  # パックマンの色(使用するアイテムで変化)</li>
            <li style="background-color:#EEF;">pl_x = 0  # x座標</li>
            <li style="background-color:#EFF;">pl_y = 0  # y座標</li>
            <li style="background-color:#EEF;">pl_d = 0  # 移動方向</li>
            <li style="background-color:#EFF;">pl_fast = False  # 移動スピードが早い</li>
            <li style="background-color:#EEF;">pl_coin = 0  # 拾ったコインの数</li>
            <li style="background-color:#EFF;">pl_life = 0  # 残機(100コインごとに1増える)</li>
            <li style="background-color:#EEF;">pl_item = [0] * 6  # 各アイテムの所有数</li>
            <li style="background-color:#EFF;">pl_scope = 0  # 視界の広さ</li>
            <li style="background-color:#EEF;">pl_muteki = 0</li>
            <li style="background-color:#EFF;"># =============== ENEMY ===============</li>
            <li style="background-color:#EEF;">emy_max = 0  # 敵の最大数</li>
            <li style="background-color:#EFF;">emy_no = 0  # 敵の配列の添字</li>
            <li style="background-color:#EEF;">emy_num_max = False  # 敵が最大数いるか</li>
            <li style="background-color:#EFF;">emy_time = 0  # 敵を生成するまでの時間</li>
            <li style="background-color:#EEF;">emy_f = [False] * emy_max  # 敵が存在するか</li>
            <li style="background-color:#EFF;">emy_col = [0] * emy_max  # 敵の色(タイプ)</li>
            <li style="background-color:#EEF;">emy_x = [0] * emy_max  # x座標</li>
            <li style="background-color:#EFF;">emy_y = [0] * emy_max  # y座標</li>
            <li style="background-color:#EEF;">emy_d = [0] * emy_max  # 移動方向</li>
            <li style="background-color:#EFF;">emy_s = [0] * emy_max  # 移動スピード</li>
            <li style="background-color:#EEF;">ENEMY_HIGH_SPEED = 2  # 移動スピード：早い</li>
            <li style="background-color:#EFF;">ENEMY_NORMAL_SPEED = 4  # 移動スピード：普通</li>
            <li style="background-color:#EEF;">ENEMY_LOW_SPEED = 6  # 移動スピード：遅い</li>
            <li style="background-color:#EFF;"># =============== ITEM ===============</li>
            <li style="background-color:#EEF;">item_use = False  # 使用中の有無</li>
            <li style="background-color:#EFF;">item_time = 0  # 使用時間</li>
            <li style="background-color:#EEF;">item_max = 0  # アイテムの最大数</li>
            <li style="background-color:#EFF;">item_generate_time = 0  # アイテムを生成するまでの時間</li>
            <li style="background-color:#EEF;"># =============== MAZE ===============</li>
            <li style="background-color:#EFF;">goal_f = False  # ゴールが迷路上にあるか</li>
            <li style="background-color:#EEF;">goal_generate_time = 0  # ゴールを生成するまでの時間</li>
            <li style="background-color:#EFF;"># =============== MAZE ===============</li>
            <li style="background-color:#EEF;">maze_size = 60  # 迷路の1ブロックのサイズ</li>
            <li style="background-color:#EFF;">maze_num = 17  # 迷路のブロック数</li>
            <li style="background-color:#EEF;">maze = []  # 迷路を管理</li>
            <li style="background-color:#EFF;"># =============== BFS ===============</li>
            <li style="background-color:#EEF;">q = deque()</li>
            <li style="background-color:#EFF;">dist = []</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;">#                           DRAW</li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** 文字の描画 ********************</li>
            <li style="background-color:#EFF;">def draw_text(sc, txt, x, y, siz, col, center):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;fnt = pygame.font.Font(None, siz)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;sur = fnt.render(txt, True, col)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 中央揃え</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if center == True:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x = x - sur.get_width() / 2</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y = y - sur.get_height() / 2</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 文字の描画</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(sur, [x, y])</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** 画像の描画 ********************</li>
            <li style="background-color:#EEF;">def draw_img(sc, img, x, y):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 中央揃え</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;x = x - img.get_width() / 2</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;y = y - img.get_height() / 2</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 画像の描画</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img, [x, y])</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** 迷路の描画 ********************</li>
            <li style="background-color:#EFF;">def draw_maze(sc):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(-7, 8):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for x in range(-7, 8):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X = (x + 7) * maze_size</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y = (y + 7) * maze_size</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mx = pl_x + x</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my = pl_y + y</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 描画：壁と通路</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 0 &lt;= mx &lt; maze_num and 0 &lt;= my &lt; maze_num:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[my][mx] == WALL:  # 壁</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img_wall, [X, Y])</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[my][mx] == ROAD:  # 通路</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img_road, [X, Y])</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 描画：ゴール</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[my][mx] == GOAL:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img_goal, [X, Y])</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 描画：コイン</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[my][mx] == COIN:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img_coin, [X, Y])</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 描画：アイテム</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[my][mx] == ITEM:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img_item, [X, Y])</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 描画：敵</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for n in range(emy_max):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_f[n] == False:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_x[n] == mx and emy_y[n] == my:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img_enemy[emy_col[n] * 4 + emy_d[n]], [X, Y])</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 描画：プレイヤー</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if x == 0 and y == 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_muteki % 2 == 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img_rz = pygame.transform.rotozoom(img_player[pl_col * 2 + tmr % 2], pl_d * (-90), 1.0)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# アイテム使用中 + 使用時間切れ間近</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if item_use == True and item_time &lt; FPS * 3:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if tmr % 2 == 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img_rz, [X, Y])</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img_rz, [X, Y])</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 緑色のパックマンの効果：矢印</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_col == COLOR_GREEN and goal_f == True:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤーからゴールの方向(角度)を取得</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a = calc_angle_of_goal_from_player()</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ゴールの方向に矢印を向ける</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img_rz = pygame.transform.rotozoom(img_arrow, -a, 1.0)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw_img(sc, img_rz, X + maze_size / 2, Y - maze_size)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 描画：視界エリア</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;draw_img(sc, img_scope[pl_scope], SCREEN_SIZE / 2, SCREEN_SIZE / 2)</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 枠組み</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.draw.rect(sc, WHITE, [SCREEN_SIZE + 30, 30, 240, 340])</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.draw.rect(sc, WHITE, [SCREEN_SIZE + 30, 400, 240, 290])</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.draw.rect(sc, WHITE, [SCREEN_SIZE + 30, 720, 240, 150])</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 色別の敵の数</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;count_enemy_color = [0] * 6</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for n in range(emy_max):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_f[n] == False:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 色別にカウント</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_enemy_color[emy_col[n]] += 1</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵の情報</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;for i in range(6):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 画像の描画</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img_rz = pygame.transform.rotozoom(img_enemy[i * 4], 0, 0.8)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img_rz, [SCREEN_SIZE + 70, 50 + 50 * i])</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 文字の描画</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw_text(sc, "X   " + str(count_enemy_color[i]), SCREEN_SIZE + 150, 60 + 50 * i, 35, BLACK, False)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# パックマン(効果)の情報</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;for i in range(1, 6):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 画像の描画</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img_rz = pygame.transform.rotozoom(img_player[i * 2], -90, 0.8)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.blit(img_rz, [SCREEN_SIZE + 110, 370 + 50 * i])</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 文字の描画</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw_text(sc, "[" + str(i) + "]:", SCREEN_SIZE + 50, 380 + 50 * i, 35, BLACK, False)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw_text(sc, "X   " + str(pl_item[i]), SCREEN_SIZE + 180, 380 + 50 * i, 35, BLACK, False)</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤーの情報</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;draw_text(sc, "COURSE  :   " + str(course), SCREEN_SIZE + 70, 750, 35, BLACK, False)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;draw_text(sc, "COIN        :   " + str(pl_coin), SCREEN_SIZE + 70, 790, 35, BLACK, False)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;draw_text(sc, "LIFE         :   " + str(pl_life), SCREEN_SIZE + 70, 830, 35, BLACK, False)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;">#                           MAZE</li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** 迷路の初期化 ********************</li>
            <li style="background-color:#EFF;">def init_maze():</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global maze, maze_num</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 迷路の大きさを拡大</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;maze_num += 2</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 迷路の初期化</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;maze = []</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(maze_num):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze.append([0] * maze_num)</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** 迷路の自動生成  ********************</li>
            <li style="background-color:#EEF;">def make_maze():</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 迷路の初期化</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;init_maze()</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 方向：上、右、下、左</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;XP = [0, 1, 0, -1]</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;YP = [-1, 0, 1, 0]</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# ボードの周囲を壁にする</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for x in range(maze_num):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[0][x] = WALL</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[maze_num - 1][x] = WALL</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(maze_num - 1):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[y][0] = WALL</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[y][maze_num - 1] = WALL</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# ボードの中を全て通路にする</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(1, maze_num - 1):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for x in range(1, maze_num - 1):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[y][x] = ROAD</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 【棒倒し方で迷路を作成】</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 等間隔に壁を作る</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(2, maze_num - 2, 2):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for x in range(2, maze_num - 2, 2):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[y][x] = WALL</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 等間隔に作った壁の隣に、壁を作る</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(2, maze_num - 2, 2):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for x in range(2, maze_num - 2, 2):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d = random.randint(0, 3)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if x &gt; 2:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d = random.randint(0, 2)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[y + YP[d]][x + XP[d]] = WALL</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;">#                           PLAYER</li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** プレイヤーの移動 ********************</li>
            <li style="background-color:#EEF;">def move_player(key):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global pl_x, pl_y, pl_d</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤーの移動速度</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if pl_fast == False:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if tmr % 2 == 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# キー入力：上方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if key[pygame.K_UP] == True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_d = DIR_UP</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 移動方向が壁以外</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[pl_y - 1][pl_x] != WALL:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_y -= 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 壁 + 茶色のパックマン</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_col == COLOR_BROWN:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_break_wall.play()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[pl_y - 1][pl_x] = ROAD</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_y -= 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# キー入力：右方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if key[pygame.K_RIGHT] == True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_d = DIR_RIGHT</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 移動方向が壁以外</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[pl_y][pl_x + 1] != WALL:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_x += 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 壁 + 茶色のパックマン</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_col == COLOR_BROWN:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_break_wall.play()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[pl_y][pl_x + 1] = ROAD</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_x += 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# キー入力：下方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if key[pygame.K_DOWN] == True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_d = DIR_DOWN</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 移動方向が壁以外</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[pl_y + 1][pl_x] != WALL:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_y += 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 壁 + 茶色のパックマン</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_col == COLOR_BROWN:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_break_wall.play()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[pl_y + 1][pl_x] = ROAD</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_y += 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# キー入力：左方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if key[pygame.K_LEFT] == True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_d = DIR_LEFT</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 移動方向が壁以外</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[pl_y][pl_x - 1] != WALL:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_x -= 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 壁 + 茶色のパックマン</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_col == COLOR_BROWN:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_break_wall.play()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[pl_y][pl_x - 1] = ROAD</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_x -= 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;">#                           ENEMY</li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** 敵の初期化 ********************</li>
            <li style="background-color:#EEF;">def init_enemy():</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global emy_f, emy_col, emy_x, emy_y, emy_d, emy_s</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;emy_f = [False] * emy_max</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;emy_col = [0] * emy_max</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;emy_x = [0] * emy_max</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;emy_y = [0] * emy_max</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;emy_d = [0] * emy_max</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;emy_s = [0] * emy_max</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** 敵を出す ********************</li>
            <li style="background-color:#EEF;">def bring_enemy():</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵の配置：ランダム選択</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;while True:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_x = random.randint(1, maze_num - 2)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_y = random.randint(1, maze_num - 2)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 位置が通路(コインを含む)場合 -&gt; ok</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[emy_y][emy_x] == ROAD or maze[emy_y][emy_x] == COIN:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤーと離れている -&gt; ok</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (emy_x &lt; pl_x - 5 or pl_x + 5 &lt; emy_x) and (emy_y &lt; pl_y - 5 or pl_y + 5 &lt; emy_y):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵の色：ランダム選択</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;emy_col = random.randint(COLOR_BLACK, COLOR_BROWN)</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵の移動スピード(敵の色で判別)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if emy_col == COLOR_BLACK:  # 黒</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_s = ENEMY_HIGH_SPEED</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;elif emy_col == COLOR_RED:  # 赤</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_s = ENEMY_NORMAL_SPEED</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;else:  # 青、黄、緑、茶</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_s = ENEMY_LOW_SPEED</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵を配置</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;set_enemy(emy_x, emy_y, emy_s, emy_col)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** 敵をセット ********************</li>
            <li style="background-color:#EFF;">def set_enemy(x, y, s, col):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global emy_no</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;while True:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_f[emy_no] == False:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_f[emy_no] = True</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_col[emy_no] = col</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_x[emy_no] = x</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_y[emy_no] = y</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_s[emy_no] = s</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_no = (emy_no + 1) % emy_max</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** 敵の移動 ********************</li>
            <li style="background-color:#EEF;">def move_enemy():</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for n in range(emy_max):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵が存在しない(要素の)場合はとばす</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_f[n] == False:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵の移動スピード</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if tmr % emy_s[n] != 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵の色：黒 -&gt; 移動方向：プレイヤーのいる方向 or ランダム</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_col[n] == COLOR_BLACK:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 移動方向：プレイヤーの方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_y[n] &gt; pl_y:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_dir = DIR_UP  # 上方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_y[n] &lt; pl_y:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_dir = DIR_DOWN  # 下方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_x[n] &lt; pl_x:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_dir = DIR_RIGHT  # 右方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_x[n] &gt; pl_x:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_dir = DIR_LEFT  # 左方向</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 移動できたかどうか -&gt; 移動可能ならば移動(Trueを返す)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_ok = move_check_to_move(emy_dir, n)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 移動できていない場合 -&gt; ランダム</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if move_ok == False:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_dir = random.randint(DIR_UP, DIR_LEFT)  # 移動方向：ランダム選択</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_ok = move_check_to_move(emy_dir, n)  # 移動できたかどうか -&gt; 移動可能ならば移動(Trueを返す)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 移動できるまで繰り返す</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if move_ok == True:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵の色：青、赤、黄、緑、茶 -&gt; 移動方向：目標へ移動(追尾)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 青、赤 -&gt; プレイヤーを追尾</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_col[n] == COLOR_BLUE or emy_col[n] == COLOR_RED:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BFS(emy_x[n], emy_y[n], pl_x, pl_y)  # 幅優先探索法でプレイヤーの位置までの最短ルートを算出</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = next_direction(emy_x[n], emy_y[n], pl_x, pl_y)  # 幅優先探索法で求めたルートから次の移動方向を取得</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 黄 -&gt; ゴールへ移動 or プレイヤーを追尾</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif emy_col[n] == COLOR_YELLOW:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ゴールが存在する：ゴールへ移動</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if search_target(GOAL) == True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goal_x, goal_y = get_target_coordinate(GOAL)  # ゴールのx,y座標を取得</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BFS(emy_x[n], emy_y[n], goal_x, goal_y)  # 幅優先探索法でゴールの位置までの最短ルートを算出</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = next_direction(emy_x[n], emy_y[n], goal_x, goal_y)  # 幅優先探索法で求めたルートから次の移動方向を取得</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ゴールが存在しない：プレイヤーを追尾</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BFS(emy_x[n], emy_y[n], pl_x, pl_y)  # 幅優先探索法でプレイヤーの位置までの最短ルートを算出</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = next_direction(emy_x[n], emy_y[n], pl_x, pl_y)  # 幅優先探索法で求めたルートから次の移動方向を取得</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 緑：コイン</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif emy_col[n] == COLOR_GREEN:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# コインが存在する：コインへ移動</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if search_target(COIN) == True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coin_x, coin_y = get_target_coordinate(COIN)  # コインのx,y座標を取得</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BFS(emy_x[n], emy_y[n], coin_x, coin_y)  # 幅優先探索法でコインの位置までの最短ルートを算出</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = next_direction(emy_x[n], emy_y[n], coin_x, coin_y)  # 幅優先探索法で求めたルートから次の移動方向を取得</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# コインが存在しない：プレイヤーを追尾</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BFS(emy_x[n], emy_y[n], pl_x, pl_y)  # 幅優先探索法でプレイヤーの位置までの最短ルートを算出</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = next_direction(emy_x[n], emy_y[n], pl_x, pl_y)  # 幅優先探索法で求めたルートから次の移動方向を取得</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 茶：アイテム</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif emy_col[n] == COLOR_BROWN:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# アイテムが存在する：アイテムへ移動</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if search_target(ITEM) == True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_x, item_y = get_target_coordinate(ITEM)  # アイテムのx,y座標を取得</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BFS(emy_x[n], emy_y[n], item_x, item_y)  # 幅優先探索法でコインの位置までの最短ルートを算出</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = next_direction(emy_x[n], emy_y[n], item_x, item_y)  # 幅優先探索法で求めたルートから次の移動方向を取得</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# アイテムが存在しない：プレイヤーを追尾</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BFS(emy_x[n], emy_y[n], pl_x, pl_y)  # 幅優先探索法でプレイヤーの位置までの最短ルートを算出</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = next_direction(emy_x[n], emy_y[n], pl_x, pl_y)  # 幅優先探索法で求めたルートから次の移動方向を取得</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 移動</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if next_dir == DIR_UP:  # 上方向</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_y[n] -= 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_d[n] = DIR_UP</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif next_dir == DIR_RIGHT:  # 右方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_x[n] += 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_d[n] = DIR_RIGHT</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif next_dir == DIR_DOWN:  # 下方向</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_y[n] += 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_d[n] = DIR_DOWN</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif next_dir == DIR_LEFT:  # 左方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_x[n] -= 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_d[n] = DIR_LEFT</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** 取得した移動方向に移動可能か確認 -&gt; 可能ならば移動(True) ********************</li>
            <li style="background-color:#EEF;">def move_check_to_move(emy_dir, no):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 移動可能か確認 -&gt; 移動</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;move_ok = False</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 上方向に移動 + 移動可否の確認</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if emy_dir == DIR_UP and maze[emy_y[no] - 1][emy_x[no]] != 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_d[no] = DIR_UP</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_y[no] -= 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_ok = True</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 右方向に移動 + 移動可否の確認</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if emy_dir == DIR_RIGHT and maze[emy_y[no]][emy_x[no] + 1] != 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_d[no] = DIR_RIGHT</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_x[no] += 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_ok = True</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 下方向に移動 + 移動可否の確認</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if emy_dir == DIR_DOWN and maze[emy_y[no] + 1][emy_x[no]] != 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_d[no] = DIR_DOWN</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_y[no] += 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_ok = True</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 左方向に移動 + 移動可否の確認</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if emy_dir == DIR_LEFT and maze[emy_y[no]][emy_x[no] - 1] != 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_d[no] = DIR_LEFT</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_x[no] -= 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_ok = True</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;return move_ok</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** ゲーム上に敵が最大数いるか調べる ********************</li>
            <li style="background-color:#EFF;">def enemy_num_max_check():</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global emy_num_max, emy_time</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵の最大数分を繰り返す</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for n in range(emy_max):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵が最大数分いない場合</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_f[n] == False:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_num_max = False</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_time = FPS * 20</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** 敵を生成するか判定 -&gt; 生成を行う ********************</li>
            <li style="background-color:#EEF;">def check_enemy_to_generate():</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global emy_time, emy_num_max</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵の最大数いる -&gt; 最大数いるか判定</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if emy_num_max == True:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enemy_num_max_check()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵が最大数いない + 敵の再生成時間が0より大きい</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;elif emy_num_max == False and emy_time &gt; 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_time -= 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵が最大数いない + 敵の際生成時間が0 -&gt; 敵を生成</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;elif emy_num_max == False and emy_time == 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bring_enemy()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_num_max = True</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;">#                           ITEM</li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** アイテムの使用 ********************</li>
            <li style="background-color:#EEF;">def use_item(key):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global pl_col, pl_scope, pl_fast</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global item_use, item_time</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 青色のパックマン</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if key[pygame.K_1] == True and pl_item[COLOR_BLUE] &gt; 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_pacman_blue.play()</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_item[COLOR_BLUE] -= 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_col = COLOR_BLUE</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_fast = True</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_use = True</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_time = FPS * 18</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 赤色のパックマン</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if key[pygame.K_2] == True and pl_item[COLOR_RED] &gt; 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_pacman_red.play()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_item[COLOR_RED] -= 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_col = COLOR_RED</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_use = True</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_time = FPS * 8</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 黄色のパックマン</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if key[pygame.K_3] == True and pl_item[COLOR_YELLOW] &gt; 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_pacman_yellow.play()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_item[COLOR_YELLOW] -= 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_col = COLOR_YELLOW</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_scope = 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_use = True</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_time = FPS * 13</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 緑色のパックマン</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if key[pygame.K_4] == True and pl_item[COLOR_GREEN] &gt; 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_pacman_green.play()</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_item[COLOR_GREEN] -= 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_col = COLOR_GREEN</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_use = True</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_time = FPS * 23</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 茶色のパックマン</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if key[pygame.K_5] == True and pl_item[COLOR_BROWN] &gt; 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_pacman_brown.play()</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_item[COLOR_BROWN] -= 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_col = COLOR_BROWN</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_use = True</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_time = FPS * 33</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** アイテムの効果を解除 ********************</li>
            <li style="background-color:#EFF;">def item_effect_off():</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global pl_col, pl_scope, pl_fast</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global item_use, item_time</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# アイテムの使用中：False ／ 使用時間：0</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;item_use = False</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;item_time = 0</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# パックマンの色：黒 ／ 移動速度：通常 ／ 視野の範囲：通常</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pl_col = COLOR_BLACK</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pl_fast = False</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pl_scope = 0</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** アイテムを生成するか判定 -&gt; 生成を行う ********************</li>
            <li style="background-color:#EEF;">def check_item_to_generate():</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global item_generate_time</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 迷路上のアイテムの数をカウント</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;count_item = 0</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(maze_num):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for x in range(maze_num):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[y][x] == ITEM:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_item += 1</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# アイテムが最大数までない + アイテムの再生成時間がある</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if count_item &lt; item_max and item_generate_time:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_generate_time -= 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# アイテムが最大数までない + アイテムの再生成時間が0 -&gt; アイテムの生成</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;elif count_item &lt; item_max and item_generate_time == 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_target(ITEM)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_generate_time = FPS * 15</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;">#                           GOAL</li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** ゴールを生成するか判定 -&gt; 生成を行う ********************</li>
            <li style="background-color:#EEF;">def check_goal_to_generate():</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global goal_generate_time, goal_f</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# ゴールがない + ゴールの再生成時間がある</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if goal_f == False and goal_generate_time &gt; 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goal_generate_time -= 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# ゴールがない + ゴールの再生成時間が0 -&gt; ゴールの生成</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;elif goal_f == False and goal_generate_time == 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_target(GOAL)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goal_f = True</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;">#                           BFS</li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** distの初期化 ********************</li>
            <li style="background-color:#EFF;">def init_dist():</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global dist</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# distの初期化</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;dist = []</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(maze_num):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist.append([0] * maze_num)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** 幅優先探索法より、目的地のルートをマッピングするために使用(mazeのコピー) ********************</li>
            <li style="background-color:#EFF;">def set_dist():</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# distの初期化</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;init_dist()</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 迷路をコピー(WALL or ROADのみ)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(maze_num):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for x in range(maze_num):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[y][x] == WALL:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist[y][x] = WALL</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist[y][x] = ROAD</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** 幅優先探索法 ********************</li>
            <li style="background-color:#EFF;">def BFS(start_x, start_y, end_x, end_y):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global q</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 迷路のコピーを作成</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;set_dist()</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# ナンバリング用の数字</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;dist_num = 1</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# x,y方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;dy = (1, 0, -1, 0)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;dx = (0, 1, 0, -1)</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# キュー：初期値の追加</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;q = deque()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;q.append((start_x, start_y))</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# スタート位置をナンバリング</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;dist[start_y][start_x] = dist_num</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 目標の位置まで探索したら、True</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;target_search = False</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;while len(q) &gt; 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 現在地(x,y)を取得</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now_pos = q.popleft()</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x, y = now_pos</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ナンバリング</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist_num += 1</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 上下左右の4方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for di in range(4):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nx = x + dx[di]</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ny = y + dy[di]</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 迷路の範囲外はとばす</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (nx &lt; 0 or nx &gt;= maze_num or ny &lt; 0 or ny &gt;= maze_num): continue</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 壁とナンバリング済みのマスはとばす</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (dist[ny][nx] &gt;= WALL): continue</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 探索終了：目標の位置にたどり着いた場合</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if nx == end_x and ny == end_y:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ナンバリング</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist[ny][nx] = dist_num</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target_search = True</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ナンバリング</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist[ny][nx] = dist_num</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 次の探索</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q.append((nx, ny))</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# while文を抜ける：プレイヤーの探索をした場合</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if target_search == True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** 幅優先探索法(BFS)から次の移動方向を取得 ********************</li>
            <li style="background-color:#EEF;">def next_direction(start_x, start_y, end_x, end_y):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;dist_x = end_x</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;dist_y = end_y</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;dist_num = dist[end_y][end_x]</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 次の移動方向</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;next_dir = 0</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;while True:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 次の移動方向</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist_num -= 1</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 上方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if dist[dist_y - 1][dist_x] == dist_num:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist_y -= 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = DIR_DOWN</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 右方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif dist[dist_y][dist_x + 1] == dist_num:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist_x += 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = DIR_LEFT</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 下方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif dist[dist_y + 1][dist_x] == dist_num:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist_y += 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = DIR_UP</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 左方向</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif dist[dist_y][dist_x - 1] == dist_num:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dist_x -= 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_dir = DIR_RIGHT</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵の位置まで来たらループを抜ける</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if dist_x == start_x and dist_y == start_y:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;return next_dir</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;">#                       SEARCH / GET / SET</li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** 指定のターゲットが存在するか探す ********************</li>
            <li style="background-color:#EFF;">def search_target(target):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 指定のターゲットが存在するか</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;result = False</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 指定のターゲットを探す</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(maze_num):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for x in range(maze_num):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[y][x] == target:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = True</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;return result</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** 指定のターゲットのx,y座標の取得 ********************</li>
            <li style="background-color:#EFF;">def get_target_coordinate(target):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 指定のターゲットのx,y座標</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;target_x = 0</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;target_y = 0</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 指定のターゲットの座標を探す</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(maze_num):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for x in range(maze_num):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[y][x] == target:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target_x = x</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target_y = y</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;return target_x, target_y</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** 目標をセット ********************</li>
            <li style="background-color:#EFF;">def set_target(target):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 取得するx,y座標</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;x = 0</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;y = 0</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤーから離す距離</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;dis = maze_num // 4</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;while True:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# x,y座標 -&gt; ランダム選択</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x = random.randint(1, maze_num - 2)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y = random.randint(1, maze_num - 2)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# x,y座標 -&gt; 通路 or コイン</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[y][x] == ROAD or maze[y][x] == COIN:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[y][x] = target</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;">#                           CALC</li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** プレイヤーとゴールの位置の角度を算出(緑色のパックマンの効果で使用) ********************</li>
            <li style="background-color:#EFF;">def calc_angle_of_goal_from_player():</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 計算：プレイヤーのx,y座標</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;x_pl = pl_x * maze_size + maze_size / 2</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;y_pl = pl_y * maze_size + maze_size / 2</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 計算：ゴールのx,y座標</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;x_goal = 0</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;y_goal = 0</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(maze_num):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for x in range(maze_num):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[y][x] == GOAL:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x_goal = x * maze_size + maze_size / 2</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y_goal = y * maze_size + maze_size / 2</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 計算：プレイヤーとゴールのx,y方向の距離</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;x_dis = x_goal - x_pl</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;y_dis = y_goal - y_pl</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 角度を計算</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;ang = math.degrees(math.atan2(y_dis, x_dis))</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;return ang</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;">#                       HIT CHECK</li>
            <li style="background-color:#EEF;"># ============================================================</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** ヒットチェック ********************</li>
            <li style="background-color:#EFF;">def hit_check():</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global pl_life, pl_coin, pl_muteki</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global goal_f, goal_generate_time</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤー：コインを拾う</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if maze[pl_y][pl_x] == COIN:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_get_coin.play()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[pl_y][pl_x] = ROAD</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_coin += 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# コインが100枚 -&gt; ライフが1増える</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_coin &gt;= 100:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_life += 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_coin -= 100</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤー：アイテムを拾う</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if maze[pl_y][pl_x] == ITEM:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_get_item.play()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[pl_y][pl_x] = ROAD</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 取得するアイテムの種類をランダムに選定</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item = random.randint(1, 5)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_item[item] += 1</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;for n in range(emy_max):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵が存在しない場合はとばす</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_f[n] == False:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵：プレイヤーと衝突</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_x[n] == pl_x and emy_y[n] == pl_y:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤー：赤色のパックマンの時 -&gt; 敵を倒す</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_col == COLOR_RED:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_player_attack.play()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_f[n] = False</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤー：赤色のパックマン以外</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤーが無敵状態ではない場合</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_muteki == 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_player_damage.play()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_muteki = FPS * 3</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_life -= 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emy_f[n] = False</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵：黄 -&gt; ゴールへ到達</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_col[n] == COLOR_YELLOW and maze[emy_y[n]][emy_x[n]] == GOAL:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[emy_y[n]][emy_x[n]] = ROAD  # ゴールをなくす</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goal_f = False  # ゴールがないフラグ</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goal_generate_time = FPS * 15  # ゴールを再生成するまでの時間</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵：緑 -&gt; コインへ到達</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_col[n] == COLOR_GREEN and maze[emy_y[n]][emy_x[n]] == COIN:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[emy_y[n]][emy_x[n]] = ROAD  # コインをなくす</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 敵：茶 -&gt; アイテムへ到達</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if emy_col[n] == COLOR_BROWN and maze[emy_y[n]][emy_x[n]] == ITEM:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[emy_y[n]][emy_x[n]] = ROAD  # アイテムをなくす</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;">#                           GAME</li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** ゲームの初期化 ********************</li>
            <li style="background-color:#EEF;">def init_game():</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global maze_num, course</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global pl_life, pl_item, pl_coin, pl_muteki</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 迷路の数</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;maze_num = 17</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# コースの階層</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;course = 0</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤー情報</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pl_life = 2</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pl_item = [2] * 6</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pl_coin = 0</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pl_muteki = 0</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# アイテムの効果を無効</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"># ******************** ゲームの初期配置／設定 ********************</li>
            <li style="background-color:#EFF;">def init_game_place():</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global pl_x, pl_y</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global emy_d, emy_x, emy_y, emy_max, emy_num_max, emy_time</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global item_n, item_max, item_generate_time</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global goal_f</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;emy_max = maze_num // 5  # 敵の最大数</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;emy_num_max = False  # 敵が最大数いるか(初期時はいない)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;emy_time = FPS * 20  # 敵を再生成するまでの時間</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;init_enemy()  # 敵の初期化</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# アイテム</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;item_max = maze_num // 5  # アイテムの最大数</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;item_generate_time = FPS * 60  # アイテムを再生成するまでの時間</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤーの配置</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;while True:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_x = random.randint(1, maze_num - 2)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_y = random.randint(1, maze_num - 2)</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[pl_y][pl_x] == ROAD:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 敵の配置</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for i in range(maze_num // 10):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bring_enemy()</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# ゴールの配置</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;set_target(GOAL)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;goal_f = True</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# アイテムの配置</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for n in range(maze_num // 10):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_target(ITEM)</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# コインの配置</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for y in range(maze_num):</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for x in range(maze_num):</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[y][x] == ROAD:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maze[y][x] = COIN</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;">#                           MAIN</li>
            <li style="background-color:#EFF;"># ============================================================</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"># ******************** メインループ ********************</li>
            <li style="background-color:#EEF;">def main():</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global idx, tmr, course</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global snd_pacman_blue, snd_pacman_red, snd_pacman_yellow, snd_pacman_green, snd_pacman_brown</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global snd_player_attack, snd_player_damage, snd_break_wall</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global snd_arrive_goal, snd_get_coin, snd_get_item</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;global pl_col, pl_muteki</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;global item_use, item_time</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# pygameモジュールの初期化 ／ タイトル設定</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.init()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;pygame.display.set_caption("PAC-MAN")</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# スクリーンの初期化 ／ クロックオブジェクト作成</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;screen = pygame.display.set_mode((SCREEN_SIZE + 300, SCREEN_SIZE))</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;clock = pygame.time.Clock()</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 効果音</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_pacman_blue = pygame.mixer.Sound("sound/pacman_blue.mp3")</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_pacman_red = pygame.mixer.Sound("sound/pacman_red.mp3")</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_pacman_yellow = pygame.mixer.Sound("sound/pacman_yellow.mp3")</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_pacman_green = pygame.mixer.Sound("sound/pacman_green.mp3")</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_pacman_brown = pygame.mixer.Sound("sound/pacman_brown.mp3")</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_player_attack = pygame.mixer.Sound("sound/player_attack.mp3")</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_player_damage = pygame.mixer.Sound("sound/player_damage.mp3")</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_break_wall = pygame.mixer.Sound("sound/break_wall.mp3")</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_arrive_goal = pygame.mixer.Sound("sound/arrive_goal.mp3")</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_get_coin = pygame.mixer.Sound("sound/get_coin.mp3")</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;snd_get_item = pygame.mixer.Sound("sound/get_item.mp3")</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;while True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmr = tmr + 1</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# プログラムの終了</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for event in pygame.event.get():</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.type == pygame.QUIT:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.quit()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit()</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# スクリーン ／ キー入力</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;screen.fill(BLACK)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key = pygame.key.get_pressed()</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# タイトル</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if idx == 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 音楽をかける</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if tmr == 1:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.mixer.music.load("music/Stellar_Wind-Unicorn_Heads.mp3")</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.mixer.music.play(-1)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;screen.fill(WHITE)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if key[pygame.K_SPACE] == 1:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 音楽をかける</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.mixer.music.load("music/Zoom_Vibe_Tracks.mp3")</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.mixer.music.play(-1)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ゲームの初期化</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_game()</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idx = 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmr = 0</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw_text(screen, "PUSH  [ SPACE ]  TO  START", (SCREEN_SIZE + 300) / 2, SCREEN_SIZE / 2, 80, BLACK, True)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ゲームプレイ</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif idx == 1:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 迷路の生成／ゲームの初期配置</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if tmr == 1:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;course += 1</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make_maze()</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_game_place()</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# プレイ中</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_player(key)  # プレイヤーの動き</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_enemy()  # 敵の動き</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_item(key)  # アイテムの使用</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hit_check()  # ヒットチェック</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_enemy_to_generate()  # 敵を生成するか判定 -&gt; 生成を行う</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_goal_to_generate()  # ゴールを生成するか判定 -&gt; 生成を行う</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_item_to_generate()  # アイテムを生成するか判定 -&gt; 生成を行う</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# アイテムを使用中の場合</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if item_use == True:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_time -= 1</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# アイテムの使用時間が切れた場合</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if item_time == 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_effect_off()</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤーが無敵状態の場合</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_muteki &gt; 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pl_muteki -= 1</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# プレイヤーのライフがなくなるとゲームオーバー</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pl_life &lt;= 0:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idx = 2</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmr = 0</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ゴールすると次のコースへ</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if maze[pl_y][pl_x] == GOAL:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snd_arrive_goal.play()</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmr = 0</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ゲームオーバー</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif idx == 2:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw_text(screen, "GAME  OVER", (SCREEN_SIZE + 300) / 2, SCREEN_SIZE / 2, 100, RED, True)</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if tmr == FPS * 3:</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idx = 0</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmr = 0</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 描画：迷路</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if idx == 1 and tmr &gt; 0:</li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw_maze(screen)</li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.display.update()</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clock.tick(FPS)</li>
            <li style="background-color:#EEF;"></li>
            <li style="background-color:#EFF;"></li>
            <li style="background-color:#EEF;">if __name__ == '__main__':</li>
            <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;main()</li>
            <li style="background-color:#EEF;"></li>
            </ol></code>

    </div>

</body>
</html>